#!/usr/bin/env python

"""
setup.py file for SWIG mapper
"""

from distutils.core import setup, Extension

LO_LIBS = "@liblo_LIBS@"
LO_LDDIRS = [x[2:] for x in LO_LIBS.split() if x[0:2]=='-L']
LO_LDLIBS = [x[2:] for x in LO_LIBS.split() if x[0:2]=='-l']

LO_CFLAGS = "@liblo_CFLAGS@"
LO_INCDIRS = [x[2:] for x in LO_CFLAGS.split() if x[0:2]=='-I']

EXTRA_LIBS = [@EXTRA_LIBS_BINDINGS@]

mapper_module = Extension('_libmapper',
                          sources=['mapper_wrap.c'],
                          include_dirs=['@top_srcdir@/src',
                                        '@top_builddir@/src',
                                        '@top_srcdir@/include']+LO_INCDIRS,
                          library_dirs=['@top_builddir@/src/.libs']+LO_LDDIRS,
                          libraries=['mapper'] + LO_LDLIBS + EXTRA_LIBS,
                          )

setup (name = 'libmapper',
       version = '@PACKAGE_VERSION@',
       author      = "libmapper.org",
       author_email = "dot_mapper@googlegroups.com",
       url = "http://libmapper.org",
       description = """A library for mapping controllers and synthesizers.""",
       long_description = open('../README', 'r').read(),
       long_description_content_type = 'text/markdown',
       license = "GNU LGPL version 2.1 or later",
       project_urls = {
           'Documentation': 'http://libmapper.org/api/index.html',
           'Source': 'https://github.com/libmapper/libmapper/',
       },
       ext_modules = [mapper_module],
       py_modules = ["libmapper"],
       )
